<?xml version="1.0" encoding="utf-8" standalone="yes"?>
<rss version="2.0" xmlns:atom="http://www.w3.org/2005/Atom">
  <channel>
    <title>平衡树 on HolyK&#39;s Blog</title>
    <link>https://blog.asukakyle.top/tags/%E5%B9%B3%E8%A1%A1%E6%A0%91/</link>
    <description>Recent content in 平衡树 on HolyK&#39;s Blog</description>
    <generator>Hugo -- gohugo.io</generator>
    <language>en-us</language>
    <copyright>CC BY-NC-SA 4.0</copyright>
    <lastBuildDate>Fri, 30 Jul 2021 20:54:17 +0800</lastBuildDate><atom:link href="https://blog.asukakyle.top/tags/%E5%B9%B3%E8%A1%A1%E6%A0%91/index.xml" rel="self" type="application/rss+xml" />
    <item>
      <title>[NOI2021] 密码箱</title>
      <link>https://blog.asukakyle.top/post/noi2021-%E5%AF%86%E7%A0%81%E7%AE%B1/</link>
      <pubDate>Fri, 30 Jul 2021 20:54:17 +0800</pubDate>
      
      <guid>https://blog.asukakyle.top/post/noi2021-%E5%AF%86%E7%A0%81%E7%AE%B1/</guid>
      <description>## 题面 ![](statement.png) ## 题解 设向量 $\begin{pmatrix}x \\ y\end{pmatrix}$ 表示分数 $\dfrac x y$。 那么整数加分数的运算 $a+\dfrac x y = \dfrac{x + ay}{y}$ 可以表示为 $$ \begin{pmatrix} 1 &amp; a\\ 0 &amp; 1 \end{pmatrix} \begin{pmatrix} x\\y \end{pmatrix} = \begin{pmatrix} x+ay\\ y \end{pmatrix} $$ 设 $a_k = \dfrac{x}{y}$，则 $a_{k-1}&#39;=a_{k-1}+\dfrac y x$，写成矩阵形式为 $$ \begin{pmatrix} a_{k-1} &amp; 1\\ 1 &amp; 0 \end{pmatrix} \begin{pmatrix} x\\y \end{pmatrix} = \begin{pmatrix} a_{k-1}x+y\\ x \end{pmatrix} $$ 记 $$ F = \begin{pmatrix} a_{0} &amp; 1\\ 1 &amp; 0 \end{pmatrix} \begin{pmatrix} a_{1} &amp; 1\\ 1 &amp; 0 \end{pmatrix} \dots \begin{pmatrix} a_{k} &amp; 1\\ 1 &amp; 0 \end{pmatrix} $$ 则 $$ f(a_0, a_1, \dots, a_n) = F_{0, 0} $$ 考虑维护矩阵 $F$。 操作`W`相当于右乘矩阵 $\begin{pmatrix}1 &amp; 0\\1 &amp; 1\end{pmatrix}$ $$ \begin{pmatrix} a_{k} &amp; 1\\ 1 &amp; 0 \end{pmatrix} \begin{pmatrix} 1 &amp; 0\\ 1 &amp; 1 \end{pmatrix} = \begin{pmatrix} a_{k} + 1 &amp; 1\\ 1 &amp; 0 \end{pmatrix} $$ 操作`E`先考虑第二种情况，可以发现是右乘矩阵 $\begin{pmatrix}1 &amp; 0\\-1 &amp; 1\end{pmatrix}\begin{pmatrix}1 &amp; 1\\1 &amp; 0\end{pmatrix}^2=\begin{pmatrix}2 &amp; 1\\-1 &amp; 0\end{pmatrix}$ $$ \begin{pmatrix}a_{k} &amp; 1\\1 &amp; 0\end{pmatrix} \begin{pmatrix}2 &amp; 1\\-1 &amp; 0\end{pmatrix} = \begin{pmatrix}2a_{k}-1 &amp; a_k\\2 &amp; 1\end{pmatrix} $$ 验证 $a_k=1$ 时是否也符合题意： 一方面 $$ \begin{pmatrix}a_{k-1} &amp; 1\\1 &amp; 0\end{pmatrix} \begin{pmatrix}2a_{k}-1 &amp; a_k\\2 &amp; 1\end{pmatrix}= \begin{pmatrix}a_{k-1} &amp; 1\\1 &amp; 0\end{pmatrix} \begin{pmatrix}1 &amp; 1\\2 &amp; 1\end{pmatrix}= \begin{pmatrix}a_{k-1}+2 &amp; a_{k-1}+1\\1 &amp; 1\end{pmatrix} $$ 另一方面 $$ \begin{pmatrix}a_{k-1}+1 &amp; 1\\1 &amp; 0\end{pmatrix} \begin{pmatrix}1 &amp; 1\\1 &amp; 0\end{pmatrix}=\begin{pmatrix}a_{k-1}+2 &amp; a_{k-1}+1\\1 &amp; 1\end{pmatrix} $$ 所以操作`E`就是右乘矩阵 $\begin{pmatrix}2 &amp; 1\\-1 &amp; 0\end{pmatrix}$ 平衡树维护即可。 ```cpp // Author: HolyK // Created: Fri Jul 30 19:13:22 2021 #include #define dbg(a.</description>
    </item>
    
  </channel>
</rss>
